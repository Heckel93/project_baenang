/* 회원 */
DROP TABLE MEMBER 
	CASCADE CONSTRAINTS;

/* 게시글 */
DROP TABLE POST 
	CASCADE CONSTRAINTS;

/* 좋아요 */
DROP TABLE LIKE 
	CASCADE CONSTRAINTS;

/* 댓글 */
DROP TABLE REPLY 
	CASCADE CONSTRAINTS;

/* 카테고리 */
DROP TABLE CATEGORY 
	CASCADE CONSTRAINTS;

/* 게시글태그 */
DROP TABLE POSTTAG 
	CASCADE CONSTRAINTS;

/* 태그 */
DROP TABLE TAG 
	CASCADE CONSTRAINTS;

/* 게시글파일저장소 */
DROP TABLE IMG_DIRETORY 
	CASCADE CONSTRAINTS;

/* 게시글이미지 */
DROP TABLE IMG 
	CASCADE CONSTRAINTS;

/* 플랜 */
DROP TABLE PLANNER 
	CASCADE CONSTRAINTS;

/* 초대 */
DROP TABLE INVITE 
	CASCADE CONSTRAINTS;

/* 세부플랜 */
DROP TABLE DETAIL_PLANNER 
	CASCADE CONSTRAINTS;

/* 관광지 */
DROP TABLE CONTENT 
	CASCADE CONSTRAINTS;

/* 콘텐츠타입 */
DROP TABLE CONTENTTYPE 
	CASCADE CONSTRAINTS;

/* 관광지카테고리 */
DROP TABLE CAT 
	CASCADE CONSTRAINTS;

/* 회원 */
CREATE TABLE MEMBER (
	M_ID NUMBER NOT NULL, /* 회원ID */
	M_EMAIL VARCHAR2(40) NOT NULL, /* 이메일 */
	M_PWD VARCHAR2(40) NOT NULL, /* 비밀번호 */
	M_GEN VARCHAR2(10) NOT NULL, /* 성별 */
	M_NNAME VARCHAR2(20) NOT NULL, /* 닉네임 */
	M_BIRTH DATE NOT NULL, /* 생년월일 */
	M_RDATE DATE, /* 가입일 */
	M_IMAGE VARCHAR2(40), /* 프로필이미지 */
	M_STATUS NUMBER, /* 회원상태 */
	M_PROFIL NUMBER /* 사용자프로필 */
);

CREATE UNIQUE INDEX PK_MEMBER
	ON MEMBER (
		M_ID ASC
	);

ALTER TABLE MEMBER
	ADD
		CONSTRAINT PK_MEMBER
		PRIMARY KEY (
			M_ID
		);

/* 게시글 */
CREATE TABLE POST (
	P_ID NUMBER NOT NULL, /* 게시글ID */
	M_ID NUMBER, /* 회원ID */
	C_ID NUMBER, /* 카테고리ID */
	P_CONTENT VARCHAR2(2000), /* 글내용 */
	P_VIEWS NUMBER, /* 조회수 */
	P_CREDATE DATE, /* 작성일 */
	P_MODDATE DATE /* 수정일 */
);

CREATE UNIQUE INDEX PK_POST
	ON POST (
		P_ID ASC
	);

ALTER TABLE POST
	ADD
		CONSTRAINT PK_POST
		PRIMARY KEY (
			P_ID
		);

/* 좋아요 */
CREATE TABLE LIKE (
	L_ID NUMBER NOT NULL, /* 좋아요ID */
	P_ID NUMBER, /* 게시글ID */
	M_ID NUMBER, /* 회원ID */
	L_DATE DATE /* 등록일 */
);

CREATE UNIQUE INDEX PK_LIKE
	ON LIKE (
		L_ID ASC
	);

ALTER TABLE LIKE
	ADD
		CONSTRAINT PK_LIKE
		PRIMARY KEY (
			L_ID
		);

/* 댓글 */
CREATE TABLE REPLY (
	COL NUMBER NOT NULL, /* 댓글ID */
	M_ID NUMBER, /* 회원ID */
	P_ID NUMBER, /* 게시글ID */
	R_CONTENT VARCHAR2(200) NOT NULL, /* 글내용 */
	R_CREDATE DATE, /* 작성일 */
	R_MODDATE DATE, /* 수정일 */
	R_STATUS NUMBER /* 댓글상태 */
);

CREATE UNIQUE INDEX PK_REPLY
	ON REPLY (
		COL ASC
	);

ALTER TABLE REPLY
	ADD
		CONSTRAINT PK_REPLY
		PRIMARY KEY (
			COL
		);

/* 카테고리 */
CREATE TABLE CATEGORY (
	C_ID NUMBER NOT NULL, /* 카테고리ID */
	C_NAME VARCHAR2(40) /* 카테고리명 */
);

CREATE UNIQUE INDEX PK_CATEGORY
	ON CATEGORY (
		C_ID ASC
	);

ALTER TABLE CATEGORY
	ADD
		CONSTRAINT PK_CATEGORY
		PRIMARY KEY (
			C_ID
		);

/* 게시글태그 */
CREATE TABLE POSTTAG (
	PT_ID NUMBER NOT NULL, /* 게시글태그ID */
	P_ID NUMBER NOT NULL, /* 게시글ID */
	T_ID NUMBER NOT NULL /* 태그ID */
);

CREATE UNIQUE INDEX PK_POSTTAG
	ON POSTTAG (
		PT_ID ASC
	);

ALTER TABLE POSTTAG
	ADD
		CONSTRAINT PK_POSTTAG
		PRIMARY KEY (
			PT_ID
		);

/* 태그 */
CREATE TABLE TAG (
	T_ID NUMBER NOT NULL, /* 태그ID */
	T_NAME VARCHAR2(40) NOT NULL /* 태그이름 */
);

CREATE UNIQUE INDEX PK_TAG
	ON TAG (
		T_ID ASC
	);

ALTER TABLE TAG
	ADD
		CONSTRAINT PK_TAG
		PRIMARY KEY (
			T_ID
		);

/* 게시글파일저장소 */
CREATE TABLE IMG_DIRETORY (
	DIR_ID NUMBER NOT NULL, /* 저장소ID */
	P_ID NUMBER, /* 게시글ID */
	I_ID NUMBER, /* 이미지ID */
	DIR_NUM NUMBER /* 이미지순서 */
);

CREATE UNIQUE INDEX PK_IMG_DIRETORY
	ON IMG_DIRETORY (
		DIR_ID ASC
	);

ALTER TABLE IMG_DIRETORY
	ADD
		CONSTRAINT PK_IMG_DIRETORY
		PRIMARY KEY (
			DIR_ID
		);

/* 게시글이미지 */
CREATE TABLE IMG (
	I_ID NUMBER NOT NULL, /* 이미지ID */
	I_PATH VARCHAR2(100), /* 이미지경로 */
	I_BIRTH DATE, /* 생성일 */
	I_NAME VARCHAR2(100), /* 이미지이름 */
	I_NAME2 VARCHAR2(10) /* 이미지확장자 */
);

CREATE UNIQUE INDEX PK_IMG
	ON IMG (
		I_ID ASC
	);

ALTER TABLE IMG
	ADD
		CONSTRAINT PK_IMG
		PRIMARY KEY (
			I_ID
		);

/* 플랜 */
CREATE TABLE PLANNER (
	P_ID NUMBER NOT NULL, /* 플랜ID */
	M_ID NUMBER, /* 회원ID */
	P_NAME VARCHAR2(20) NOT NULL, /* 플랜이름 */
	P_BIRTH DATE, /* 작성일 */
	P_MODDATE DATE /* 수정일 */
);

CREATE UNIQUE INDEX PK_PLANNER
	ON PLANNER (
		P_ID ASC
	);

ALTER TABLE PLANNER
	ADD
		CONSTRAINT PK_PLANNER
		PRIMARY KEY (
			P_ID
		);

/* 초대 */
CREATE TABLE INVITE (
	I_ID NUMBER NOT NULL, /* 초대ID */
	P_ID NUMBER, /* 플랜ID */
	M_ID NUMBER, /* 회원ID */
	I_PER NUMBER, /* 권한 */
	I_STATUS NUMBER /* 초대상태 */
);

CREATE UNIQUE INDEX PK_INVITE
	ON INVITE (
		I_ID ASC
	);

ALTER TABLE INVITE
	ADD
		CONSTRAINT PK_INVITE
		PRIMARY KEY (
			I_ID
		);

/* 세부플랜 */
CREATE TABLE DETAIL_PLANNER (
	DP_ID NUMBER NOT NULL, /* 세부플랜ID */
	P_ID NUMBER, /* 플랜ID */
	CONTENTID VARCHAR2(200), /* 관광지ID */
	DP_DAY NUMBER, /* 일차 */
	DP_START DATE, /* 여행시작일 */
	DP_END DATE, /* 여행종료일 */
	DP_NUM NUMBER /* 일정순서 */
);

CREATE UNIQUE INDEX PK_DETAIL_PLANNER
	ON DETAIL_PLANNER (
		DP_ID ASC
	);

ALTER TABLE DETAIL_PLANNER
	ADD
		CONSTRAINT PK_DETAIL_PLANNER
		PRIMARY KEY (
			DP_ID
		);

/* 관광지 */
CREATE TABLE CONTENT (
	CONTENTID VARCHAR2(200) NOT NULL, /* 관광지ID */
	CONTENTTYPEID VARCHAR2(20), /* 콘텐츠타입ID */
	CODE VARCHAR2(20), /* 카테고리ID */
	TITLE VARCHAR2( 200), /* 이름 */
	TEL VARCHAR2( 200), /* 전화번호 */
	ADDR VARCHAR2( 400), /* 주소 */
	FIRSTIMAGE VARCHAR2( 600), /* 이미지 */
	MAPX VARCHAR2( 200), /* 경도 */
	MAPY VARCHAR2( 200) /* 위도 */
);

CREATE UNIQUE INDEX PK_CONTENT
	ON CONTENT (
		CONTENTID ASC
	);

ALTER TABLE CONTENT
	ADD
		CONSTRAINT PK_CONTENT
		PRIMARY KEY (
			CONTENTID
		);

/* 콘텐츠타입 */
CREATE TABLE CONTENTTYPE (
	CONTENTTYPEID VARCHAR2(20) NOT NULL, /* 콘텐츠타입ID */
	CT_NAME VARCHAR2(200) /* 타입명 */
);

CREATE UNIQUE INDEX PK_CONTENTTYPE
	ON CONTENTTYPE (
		CONTENTTYPEID ASC
	);

ALTER TABLE CONTENTTYPE
	ADD
		CONSTRAINT PK_CONTENTTYPE
		PRIMARY KEY (
			CONTENTTYPEID
		);

/* 관광지카테고리 */
CREATE TABLE CAT (
	CODE VARCHAR2(20) NOT NULL, /* 카테고리ID */
	NAME VARCHAR2(200) /* 카테고리이름 */
);

CREATE UNIQUE INDEX PK_CAT
	ON CAT (
		CODE ASC
	);

ALTER TABLE CAT
	ADD
		CONSTRAINT PK_CAT
		PRIMARY KEY (
			CODE
		);

ALTER TABLE POST
	ADD
		CONSTRAINT FK_MEMBER_TO_POST
		FOREIGN KEY (
			M_ID
		)
		REFERENCES MEMBER (
			M_ID
		);

ALTER TABLE POST
	ADD
		CONSTRAINT FK_CATEGORY_TO_POST
		FOREIGN KEY (
			C_ID
		)
		REFERENCES CATEGORY (
			C_ID
		);

ALTER TABLE LIKE
	ADD
		CONSTRAINT FK_POST_TO_LIKE
		FOREIGN KEY (
			P_ID
		)
		REFERENCES POST (
			P_ID
		);

ALTER TABLE LIKE
	ADD
		CONSTRAINT FK_MEMBER_TO_LIKE
		FOREIGN KEY (
			M_ID
		)
		REFERENCES MEMBER (
			M_ID
		);

ALTER TABLE REPLY
	ADD
		CONSTRAINT FK_MEMBER_TO_REPLY
		FOREIGN KEY (
			M_ID
		)
		REFERENCES MEMBER (
			M_ID
		);

ALTER TABLE REPLY
	ADD
		CONSTRAINT FK_POST_TO_REPLY
		FOREIGN KEY (
			P_ID
		)
		REFERENCES POST (
			P_ID
		);

ALTER TABLE POSTTAG
	ADD
		CONSTRAINT FK_POST_TO_POSTTAG
		FOREIGN KEY (
			P_ID
		)
		REFERENCES POST (
			P_ID
		);

ALTER TABLE POSTTAG
	ADD
		CONSTRAINT FK_TAG_TO_POSTTAG
		FOREIGN KEY (
			T_ID
		)
		REFERENCES TAG (
			T_ID
		);

ALTER TABLE IMG_DIRETORY
	ADD
		CONSTRAINT FK_POST_TO_IMG_DIRETORY
		FOREIGN KEY (
			P_ID
		)
		REFERENCES POST (
			P_ID
		);

ALTER TABLE IMG_DIRETORY
	ADD
		CONSTRAINT FK_IMG_TO_IMG_DIRETORY
		FOREIGN KEY (
			I_ID
		)
		REFERENCES IMG (
			I_ID
		);

ALTER TABLE PLANNER
	ADD
		CONSTRAINT FK_MEMBER_TO_PLANNER
		FOREIGN KEY (
			M_ID
		)
		REFERENCES MEMBER (
			M_ID
		);

ALTER TABLE INVITE
	ADD
		CONSTRAINT FK_PLANNER_TO_INVITE
		FOREIGN KEY (
			P_ID
		)
		REFERENCES PLANNER (
			P_ID
		);

ALTER TABLE INVITE
	ADD
		CONSTRAINT FK_MEMBER_TO_INVITE
		FOREIGN KEY (
			M_ID
		)
		REFERENCES MEMBER (
			M_ID
		);

ALTER TABLE DETAIL_PLANNER
	ADD
		CONSTRAINT FK_PLANNER_TO_DETAIL_PLANNER
		FOREIGN KEY (
			P_ID
		)
		REFERENCES PLANNER (
			P_ID
		);

ALTER TABLE DETAIL_PLANNER
	ADD
		CONSTRAINT FK_CONTENT_TO_DETAIL_PLANNER
		FOREIGN KEY (
			CONTENTID
		)
		REFERENCES CONTENT (
			CONTENTID
		);

ALTER TABLE CONTENT
	ADD
		CONSTRAINT FK_CONTENTTYPE_TO_CONTENT
		FOREIGN KEY (
			CONTENTTYPEID
		)
		REFERENCES CONTENTTYPE (
			CONTENTTYPEID
		);

ALTER TABLE CONTENT
	ADD
		CONSTRAINT FK_CAT_TO_CONTENT
		FOREIGN KEY (
			CODE
		)
		REFERENCES CAT (
			CODE
		);